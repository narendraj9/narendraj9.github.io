# ghc version
machine:
    ghc:
        version: 7.10.2

# Changes to master shouldn't trigger anything.
general:
    branches:
        ignore:
            - master

# Install dependencies only
dependencies:
  override:
    # Temporary fix
    - sudo apt-get install libluajit-5.1.0-dev liblualib-5.1.0-dev
    - cabal install --dependencies-only --avoid-reinstalls --constraint="hslua +system-lua +luajit"

# Generate static site during test phase
test:
  post:
    - make

# Deploy to master branch
deployment:
  production:
    branch: source
    commands:
    - make deploy
